# looking at the config from ubuntu arm on AWS
# CONFIG_CROSS_MEMORY_ATTACH is not set
CONFIG_USELIB=y
# CONFIG_ARCH_CLOCKSOURCE_DATA is not set
CONFIG_GENERIC_IRQ_CHIP=y
# CONFIG_IRQ_MSI_IOMMU is not set
CONFIG_PSI=y
CONFIG_CGROUP_RDMA=y
# CONFIG_PROC_PID_CPUSET is not set
CONFIG_RELAY=y
CONFIG_SGETMASK_SYSCALL=y
# CONFIG_SYSCTL_SYSCALL is not set
CONFIG_PC104=y
CONFIG_ARCH_ACTIONS=y
CONFIG_ARCH_ACTIONS=y
CONFIG_ARCH_AGILEX=y
CONFIG_ARCH_SUNXI=y
CONFIG_ARCH_BCM2835=y
CONFIG_ARCH_BCM_IPROC=y
CONFIG_ARCH_BERLIN=y
CONFIG_ARCH_BITMAIN=y
CONFIG_ARCH_BRCMSTB=y
CONFIG_ARCH_K3=y
CONFIG_ARCH_LAYERSCAPE=y
CONFIG_ARCH_LG1K=y
CONFIG_ARCH_MXC=y
CONFIG_ARCH_REALTEK=y
CONFIG_ARCH_RENESAS=y
CONFIG_ARCH_STRATIX10=y
CONFIG_ARCH_SYNQUACER=y
CONFIG_ARCH_THUNDER2=y
CONFIG_ARM64_WORKAROUND_REPEAT_TLBI=y
CONFIG_HISILICON_ERRATUM_161600802=y
CONFIG_QCOM_FALKOR_ERRATUM_E1041=y
CONFIG_FUJITSU_ERRATUM_010001=y
# CONFIG_SWP_EMULATION is not set
# CONFIG_CP15_BARRIER_EMULATION is not set
# CONFIG_SETEND_EMULATION is not set
CONFIG_ARM64_PMEM=y
# CONFIG_CC_HAVE_STACKPROTECTOR_SYSREG is not set
# CONFIG_STACKPROTECTOR_PER_TASK is not set
CONFIG_CMDLINE="console=ttyAMA0 rootflags=rw mount.usrflags=ro"
# CONFIG_ARM_SCPI_CPUFREQ is not set
CONFIG_ARM_BRCMSTB_AVS_CPUFREQ=m
# CONFIG_ARM_IMX6Q_CPUFREQ is not set
# CONFIG_ARM_IMX_CPUFREQ_DT is not set
CONFIG_ARM_MEDIATEK_CPUFREQ=m
# CONFIG_ARM_QCOM_CPUFREQ_NVMEM is not set
CONFIG_ARM_QCOM_CPUFREQ_HW=m
# CONFIG_ARM_RASPBERRYPI_CPUFREQ is not set
CONFIG_QORIQ_CPUFREQ=m
CONFIG_EFI_ARMSTUB_DTB_LOADER=y

## none of this worked...

CONFIG_ARM64_4K_PAGES=y
CONFIG_EFI_BOOTLOADER_CONTROL=m
CONFIG_EFI_CAPSULE_LOADER=m
CONFIG_EFI_TEST=m
CONFIG_RESET_ATTACK_MITIGATION=y
CONFIG_ACPI=y
CONFIG_ACPI_APEI=y
CONFIG_HAVE_ACPI_APEI=y
CONFIG_UEFI_CPER=y
CONFIG_UEFI_CPER_ARM=y
CONFIG_MTD_CFI=m
CONFIG_MTD_JEDECPROBE=m
CONFIG_MTD_GEN_PROBE=m
CONFIG_MTD_CFI_INTELEXT=m
CONFIG_MTD_CFI_AMDSTD=m
CONFIG_MTD_CFI_STAA=m
CONFIG_MTD_CFI_UTIL=m
CONFIG_MTD_RAM=m
CONFIG_MTD_ROM=m
CONFIG_MTD_ABSENT=m
CONFIG_MMC_SDHCI_SPRD=m
CONFIG_MMC_TMIO_CORE=m
CONFIG_MMC_SDHI=m
CONFIG_MMC_SDHI_SYS_DMAC=m
CONFIG_MMC_SDHI_INTERNAL_DMAC=m
CONFIG_MMC_CB710=m
CONFIG_MMC_VIA_SDMMC=m
CONFIG_MMC_CAVIUM_THUNDERX=m
CONFIG_GPIO_THUNDERX=m
CONFIG_HW_RANDOM_CAVIUM=m
CONFIG_SPI_THUNDERX=m
CONFIG_MMC_DW=m
CONFIG_MMC_DW_PLTFM=m
# CONFIG_MMC_DW_BLUEFIELD is not set
CONFIG_MMC_DW_EXYNOS=m
# CONFIG_MMC_DW_HI3798CV200 is not set
CONFIG_MMC_DW_K3=m
CONFIG_MMC_DW_PCI=m
CONFIG_MMC_SH_MMCIF=m
CONFIG_MMC_VUB300=m
CONFIG_MMC_USHC=m
CONFIG_MMC_USDHI6ROL0=m
# CONFIG_MMC_REALTEK_PCI is not set
# CONFIG_MMC_REALTEK_USB is not set
CONFIG_MMC_SUNXI=m
CONFIG_MMC_TOSHIBA_PCI=m
CONFIG_MMC_BCM2835=m
CONFIG_MMC_MTK=m
CONFIG_IOMMU_IO_PGTABLE=y
CONFIG_IOMMU_IO_PGTABLE_LPAE=y
# CONFIG_IOMMU_IO_PGTABLE_LPAE_SELFTEST is not set
# CONFIG_IOMMU_IO_PGTABLE_ARMV7S is not set
# CONFIG_IOMMU_DEBUGFS is not set
# CONFIG_IOMMU_DEFAULT_PASSTHROUGH is not set
CONFIG_OF_IOMMU=y
CONFIG_IOMMU_DMA=y
# CONFIG_IPMMU_VMSA is not set
CONFIG_ARM_SMMU=y
CONFIG_ARM_SMMU_DISABLE_BYPASS_BY_DEFAULT=y
CONFIG_ARM_SMMU_V3=y
# CONFIG_MTK_IOMMU is not set
CONFIG_QCOM_IOMMU=y
CONFIG_VIRTIO_IOMMU=y

## none of this worked...

## now from the https://github.com/cavium/thunderx-linux/blob/master/cavium/configs/config-arm64-default
CONFIG_ACPI_CPPC_CPUFREQ=m
CONFIG_ACPI_CPPC_LIB=y
CONFIG_ACPI_HED=y
# CONFIG_ACPI_I2C_OPREGION is not set
CONFIG_ARCH_BCM2835=y
CONFIG_ARCH_BCM_IPROC=y
CONFIG_ARCH_BERLIN=y
CONFIG_ARCH_BRCMSTB=y
CONFIG_ARCH_MESON=y
CONFIG_DVB_MAX_ADAPTERS=16
CONFIG_DW_APB_ICTL=y
CONFIG_DWMAC_GENERIC=m
CONFIG_DWMAC_IPQ806X=m
CONFIG_DWMAC_MESON=m
CONFIG_DWMAC_SUN8I=m
CONFIG_DWMAC_SUNXI=m
CONFIG_E1000E=y
CONFIG_ACPI_APEI_GHES=y
CONFIG_ACPI_APEI=y
CONFIG_EDAC_GHES=y
CONFIG_EDAC_SUPPORT=y
CONFIG_EDAC_THUNDERX=y
CONFIG_EDAC=y
CONFIG_EEPROM_AT25=m
CONFIG_EFI_CAPSULE_LOADER=y
CONFIG_NET_VENDOR_ALLWINNER=y
CONFIG_STMMAC_ETH=m
CONFIG_STMMAC_PLATFORM=m
CONFIG_SUNXI_CCU=y
CONFIG_SUNXI_RSB=y
CONFIG_SUNXI_SRAM=y
CONFIG_I2C_IMX=y
CONFIG_I2C_MESON=y
CONFIG_I2C_MUX_PCA954x=y
CONFIG_I2C_MUX=y
CONFIG_I2C_MV64XXX=y
CONFIG_I2C_QUP=y
CONFIG_I2C_RCAR=y
CONFIG_I2C_RK3X=y
CONFIG_I2C_SH_MOBILE=y
CONFIG_I2C_SLAVE=y
CONFIG_I2C_SMBUS=y
CONFIG_I2C_TEGRA=y
CONFIG_I2C_THUNDERX=y
CONFIG_I2C_XLP9XX=y
CONFIG_I2C=y
CONFIG_MESON_GXBB_WATCHDOG=m
CONFIG_MESON_GXL_PHY=m
CONFIG_MESON_GX_PM_DOMAINS=y
CONFIG_MESON_GX_SOCINFO=y
CONFIG_MESON_IRQ_GPIO=y
CONFIG_MESON_MX_SOCINFO=y
CONFIG_MESON_SM=y
CONFIG_MESON_WATCHDOG=m
CONFIG_SPI_ROCKCHIP=y
CONFIG_SPI_SPIDEV=m
CONFIG_SPI_THUNDERX=y
CONFIG_SPI_XLP=y
CONFIG_SRAM=y
CONFIG_SUNXI_CCU=y
CONFIG_SUNXI_RSB=y
CONFIG_SUNXI_SRAM=y
CONFIG_UEFI_CPER_ARM=y
CONFIG_UEFI_CPER=y

## largely no changes past here...

CONFIG_AHCI_CEVA=y
CONFIG_AHCI_XGENE=y
CONFIG_ARCH_MEDIATEK=y
CONFIG_ARCH_QCOM=y
CONFIG_ARCH_HISI=y
CONFIG_ARCH_SEATTLE=y
CONFIG_ARCH_SPRD=y
CONFIG_ARCH_TEGRA=y
CONFIG_ARCH_TEGRA_132_SOC=y
CONFIG_ARCH_THUNDER=y
CONFIG_ARCH_VEXPRESS=y
CONFIG_ARCH_XGENE=y
CONFIG_ARCH_ZYNQMP=y
CONFIG_ARM_CPUIDLE=y
# CONFIG_ARM64_64K_PAGES is not set
CONFIG_ARM64_ACPI_PARKING_PROTOCOL=y
CONFIG_ARM64_CRYPTO=y
CONFIG_ARM64_VA_BITS_48=y
CONFIG_CPU_IDLE=y
CONFIG_CHR_DEV_SCH=m
CONFIG_COMMON_CLK_QCOM=y
CONFIG_COMPAT=y
CONFIG_CONNECTOR=m
# CONFIG_CORE_DUMP_DEFAULT_ELF_HEADERS is not set
CONFIG_CRYPTO_AES_ARM64_CE_BLK=y
CONFIG_CRYPTO_AES_ARM64_CE_CCM=y
CONFIG_CRYPTO_AES_ARM64_NEON_BLK=y
CONFIG_CRYPTO_ANSI_CPRNG=y
CONFIG_CRYPTO_GHASH_ARM64_CE=y
CONFIG_CRYPTO_SHA1_ARM64_CE=y
CONFIG_CRYPTO_SHA2_ARM64_CE=y
# CONFIG_DEBUG_PREEMPT is not set
CONFIG_DM_DEBUG=y
CONFIG_FB_ARMCLCD=y
CONFIG_GPIO_PL061=y
CONFIG_GPIO_XGENE=y
CONFIG_GPIO_XGENE_SB=y
CONFIG_KEYBOARD_GPIO=m
# CONFIG_IOMMU_SUPPORT is not set
# CONFIG_IOSCHED_DEADLINE is not set
CONFIG_KVM=y
CONFIG_LEGACY_PTY_COUNT=16
CONFIG_MAILBOX=y
CONFIG_MDIO_BITBANG=m
CONFIG_MDIO_GPIO=m
CONFIG_MDIO_OCTEON=y
CONFIG_MMC_ARMMMCI=y
CONFIG_MMC_SDHCI_PLTFM=y
CONFIG_MMC_SPI=y
CONFIG_MSM_GCC_8916=y
# CONFIG_NETFILTER_XT_MATCH_SCTP is not set
CONFIG_NET_XGENE=y
# CONFIG_NF_CT_PROTO_SCTP is not set
CONFIG_NO_HZ_IDLE=y
CONFIG_PATA_OF_PLATFORM=y
CONFIG_PATA_PLATFORM=y
CONFIG_PCI_HISI=y
CONFIG_PCI_HOST_GENERIC=y
CONFIG_PCI_HOST_THUNDER_ECAM=y
CONFIG_PCI_HOST_THUNDER_PEM=y
CONFIG_PCI_PASID=y
CONFIG_PCI_PRI=y
CONFIG_PCI_REALLOC_ENABLE_AUTO=y
CONFIG_PCI_STUB=m
CONFIG_PCI_XGENE=y
CONFIG_PHY_XGENE=y
CONFIG_PINCTRL_MSM8916=y
CONFIG_POWER_RESET_SYSCON=y
CONFIG_POWER_RESET_XGENE=y
CONFIG_PREEMPT=y
# CONFIG_PROC_PID_CPUSET is not set
CONFIG_RTC_DRV_EFI=y
CONFIG_RTC_DRV_XGENE=y
CONFIG_SATA_AHCI_PLATFORM=y
# CONFIG_SCSI_PROC_FS is not set
CONFIG_SECCOMP=y
CONFIG_SERIAL_8250_MT6577=y
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y
CONFIG_SERIAL_MSM=y
CONFIG_SERIAL_MSM_CONSOLE=y
CONFIG_SERIAL_OF_PLATFORM=y
CONFIG_SERIAL_XILINX_PS_UART=y
CONFIG_SERIAL_XILINX_PS_UART_CONSOLE=y
CONFIG_SERIO_AMBAKMI=y
CONFIG_SPI=y
CONFIG_SPI_PL022=y
CONFIG_SPI_QUP=y
CONFIG_TASKSTATS=y
CONFIG_TASK_DELAY_ACCT=y
CONFIG_TCG_TIS_ST33ZP24=m
CONFIG_TCG_TIS_ST33ZP24_I2C=m
CONFIG_TCG_TIS_ST33ZP24_SPI=m
CONFIG_THUNDER_NIC_PF=y
CONFIG_THUNDER_NIC_VF=y
CONFIG_UEVENT_HELPER_PATH="/sbin/hotplug"
CONFIG_UIO=m
CONFIG_USB_EHCI_HCD_PLATFORM=y
CONFIG_USB_ISP1760=y
CONFIG_USB_OHCI_HCD_PLATFORM=y
CONFIG_USB_ULPI=y
CONFIG_USB_XHCI_PLATFORM=y
CONFIG_VIRTUALIZATION=y
CONFIG_XGENE_DMA=y
